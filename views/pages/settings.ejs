<% layout('boilerplate') %>
<script src="js/client_signup.js"></script>
<script src="js/settings.js"></script>
<section>
<div class="container">
    <%if(!user){%>
    <div class="row">
        <div class="col-lg-12">
            please log in first
        </div>
    </div>
    <%}else {%>
    <div class="row">
        <div class="col-lg-12">
            <div class="text-center">
                <h1 class="title-one">Change profile details</h1>
            </div>
            <form action="/settings" id="settings-form" method="post">
                <div class="form-group">
                    <label>First name</label>
                    <input type="text" id="firstName" class="form-control" name="first_name" value="<%=user.first_name%>">
                </div>
                <div class="form-group">
                    <label>Last name</label>
                    <input type="text" id="lastName" class="form-control" name="last_name" value="<%=user.last_name%>">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input id="email" type="text" class="form-control" name="email" value="<%=user.email%>" onfocusout='checkEmail();'>
                    <div id="emailIssue" class="alert alert-danger" style="display: none"> Please enter a valid mail</div>
                </div>
                <div class="form-group">
                    <label>New password</label>
                    <input type="password" id="pass" class="form-control" name="password" onfocusout='validatePassword(pass);'>
                    <div id="passwordIssue" class="alert alert-danger" style="display: none"> Please enter a valid password</div>
                </div>
                <div class="form-group">
                    <label>Again...</label>
                    <input type="password" id="pass2" class="form-control" name="password2" onfocusout='verifyPassword();'>
                    <div id="passConfirm" class="alert alert-danger" style="display: none">Mismatch</div>
                </div>
                <div class="form-group">
                    <label>Phone number</label>
                    <input type="number" class="form-control" name="phone_number" value="<%=user.phone%>">
                </div>

                <button type="submit" id="submit" class="btn btn-warning btn-lg">Change details</button>
                <div id="submitValidate" class="alert alert-danger" style="display: none">Something wrong</div>
            </form>
        </div>
    </div>
    <%}%>
</div>
</section>