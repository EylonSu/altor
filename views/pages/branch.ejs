<% layout('calendar-template') %>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyCio4YGG9Ls4kmhuazsucZSL5IZWqZl1a0"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
<script src="js/branch.js"></script>
<script src="datetimepicker/js/bootstrap-datetimepicker.min.js"></script>


<!--dateTimePicker-->

<div class="container">
    <div class="row">
        <div class="col-lg-6">
            <h1>Wellcome to <%= branch.name %> branch page</h1>
            <h3>contact information:</h3>
            <h4>Phone: <%= branch.phone %></h4>
            <h4>email: <%= branch.email %></h4>
            <hr class="intro-divider">
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <button type="button" class="btn btn-secondary btn-lg"
                    onclick='initialize("<%=address%>");'>
                הראה על המפה
            </button>
            <div id="map_canvas" class="col-lg-12" style="width:400px; height:400px; display:none"></div>
        </div>
        <div class="col-lg-6">


            <% if (user && user.role == 'client') { %>
            <!--choose service-->
            <div id="choose-service" class="row">
                <div class="col-lg-12">
                    <div class="dropdown">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                            Choose service
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <% branch.services.forEach(function(service){ %>
                            <li><a onclick="serviceHasChosen('<%=service.duration%>', '<%=service._id%>')" href="#"><%=service.name%></a></li>
                            <%})%>
                        </ul>
                    </div>
                </div>
            </div>
            <!--dateTimePicker-->
            <div class="well">
                <div id="datetimepicker1" class="input-append date">
                    <input data-format="dd/MM/yyyy" type="text"></input>
                    <span class="add-on">
      <i data-time-icon="icon-time" data-date-icon="icon-calendar">
      </i>
    </span>
                </div>
            </div>


            <% } else if (!user) { %>
            <div>
                Please <a href="/client-sign-up/">sign up</a> or <a href="/login/">login</a> to set an appointment
            </div>
            <% } %>
        </div>


        <!-- Calendar -->
    </div>
</div>



    <script type="text/javascript">
        $(function() {
            $('#datetimepicker1').datetimepicker({
                language: 'pt-BR'
            });
        });
        $.fn.datetimepicker.defaults = {
            maskInput: true,           // disables the text input mask
            pickDate: true,            // disables the date picker
            pickTime: false,            // disables de time picker
            pick12HourFormat: false,   // enables the 12-hour format time picker
            pickSeconds: false,         // disables seconds in the time picker
            startDate: -Infinity,      // set a minimum date
            endDate: Infinity          // set a maximum date
        };

    </script>